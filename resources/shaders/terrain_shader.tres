[gd_resource type="Shader" format=2]

[resource]
code = "shader_type spatial;


uniform sampler2D red_diffuse;
uniform int red_scale = 1;

uniform sampler2D green_diffuse;
uniform int green_scale = 1;

uniform sampler2D blue_diffuse;
uniform int blue_scale = 1;

uniform sampler2D alpha_diffuse;
uniform int alpha_scale = 1;

uniform sampler2D splatmap;


void fragment() {
	mat4 albedo; 
	vec4 value = texture(splatmap, UV);
	
	albedo[0].rgb = texture(red_diffuse, UV * vec2(float(red_scale))).rgb * value.r;
	albedo[1].rgb = texture(green_diffuse, UV * vec2(float(green_scale))).rgb * value.g;
	albedo[2].rgb = texture(blue_diffuse, UV * vec2(float(blue_scale))).rgb * value.b;
	albedo[3].rgb = texture(alpha_diffuse, UV * vec2(float(alpha_scale))).rgb * value.a;
	
	ALBEDO = albedo[0].rgb + albedo[1].rgb + albedo[2].rgb;// + albedo[3].rgb;
}
"
